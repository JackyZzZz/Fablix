<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel="stylesheet" href="main.css">

    <title>Fablix</title>
</head>
<body>
    <div class="header">
        <img src="images/logo.png" alt="Logo" style="height: 50px;">
        <div class="site-title">Fablix</div>
        <div><a href="main.html">Home</a></div>
        <div><a id="resultsLink" onclick="goBackToList();">Results</a></div>
        <div><a href="cart.html">Checkout</a></div>
        <div class="search-bar">
            <form id="search-form" action="movie-list.html" method="GET">
                <input class="search-input" type="text" placeholder="Title" name="title">
                <input class="search-input" type="text" placeholder="Year" name="year">
                <input class="search-input" type="text" placeholder="Director" name="director">
                <input class="search-input" type="text" placeholder="Star" name="star">
                <button type="submit">Search</button>
            </form>
        </div>
<!--        <div><a href="/logout">Logout</a></div>-->
    </div>

    <div class="main-title">Browsing by movie genres</div>

    <table id="genre_table">
        <tbody id="genre_table_body"></tbody>
    </table>

    <div class="main-title">Browsing by movie titles</div>

    <div id="title-list">
        <!-- The title list will be populated by JavaScript -->
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <script>
        function goBackToList() {
            const movieListState = sessionStorage.getItem('movieListState');
            const state = JSON.parse(movieListState);

            let queryString = Object.keys(state).reduce((acc, key) => {
                if (state[key]) {
                    acc.push(`${encodeURIComponent(key)}=${encodeURIComponent(state[key])}`);
                }
                return acc;
            }, []).join('&');

            window.location.href = `movie-list.html?${queryString}`;
        }
    </script>

    <script src="main.js"></script>
</body>
</html>
